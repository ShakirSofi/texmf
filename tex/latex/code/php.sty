\ProvidesPackage{php}

\input{requires.tex}
\input{colors.tex}
\input{captions.tex}
\input{lengths.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Captions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareCaptionFormat{phplisting}{\colorbox[HTML]{dab359}{\parbox{\dimexpr\textwidth-2\fboxsep\relax}{#1#2#3}}}
\captionsetup[PHPCAPTION]{format=phplisting,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,small}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Typesetting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Language Definition
\lstdefinelanguage{PHP}{%
  % Basic settings
  basicstyle=\smaller\ttfamily,
  tabsize=4,
  %frame=single,
  showstringspaces=false,
  mathescape=true,
  breaklines=true,
  numbers=left,
  % Keywords, strings, and comments
  keywords={%
  __halt_compiler(), abstract, and, array(), as, break, callable, case, catch,
  class, clone, const, continue, declare, default, die(), do, echo, else,
  elseif, empty(), enddeclare, endfor, endforeach, endif, endswitch, endwhile,
  eval(), exit(), extends, final, finally, for, foreach, function, global,
  goto, if, implements, include, include_once, instanceof, insteadof,
  interface, isset(), list(), namespace, new, or, print, private, protected,
  public, require, require_once, return, static, switch, throw, trait, try,
  unset(), use, var, while, xor, yield
  },
  keywords=[2]{%
  },
  morestring=[b]",
  morestring=[b]',
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  % Colors and style
  %backgroundcolor=\color{BackgroundYellow},
  keywordstyle=\color{blue},
  keywordstyle=[2]\color{DarkOrchid},
  commentstyle=\color{ForestGreen},
  stringstyle=\color{Red},
  numberstyle=\color{SolarizedGrey}
}

% environment
\lstnewenvironment{PHP}[1][]{%
  \lstset{language=PHP, linewidth=80\charwidth, #1}
  \captionsetup{options=PHPCAPTION}
}{}


% inline definition.
\newcommand*{\php}{\lstinline[{language=PHP}]}

% input listing definition
\newcommand{\inputphp}[2][ ]{%
  {%
  \captionsetup{options=PHPCAPTION}
  \lstset{linewidth=80\charwidth}
  \lstinputlisting[language=PHP,#1]{#2} 
  }
}
