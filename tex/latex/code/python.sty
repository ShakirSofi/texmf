\ProvidesPackage{python}

\input{requires.tex}
\input{colors.tex}
\input{lengths.tex}
\input{captions.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Captions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareCaptionFormat{listing}{\colorbox[HTML]{3675a9}{\parbox{\dimexpr\textwidth-2\fboxsep\relax}{#1#2#3}}}
\captionsetup[PYTHON]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,small}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Typesetting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Language Definition
\lstdefinelanguage{Python}{%
  % Basic settings
  basicstyle=\smaller\ttfamily,
  tabsize=4,
  showstringspaces=false,
  mathescape=true,
  breaklines=true,
  numbers=left,
  % Keywords, strings, and comments
  keywords={%
    and, del, from, not, while, as, elif, global, or, with, assert, else, if,
    pass, yield, break, except, import, print, class, exec, in, raise,
    continue, finally, is, return, def, for, lambda, try
  },
  keywords=[2]{%
    numpy, np, scipy, sp, plt
  },
  morestring=[b]",
  morestring=[b]',
  morecomment=[l]{\#},
  % Colors and style
  keywordstyle=\color{blue},
  keywordstyle=[2]\color{DarkOrchid},
  commentstyle=\color{ForestGreen},
  stringstyle=\color{Red},
  numberstyle=\color{SolarizedGrey}
}

% environment
\lstnewenvironment{Python}[1][]{%
  \lstset{language=Python, linewidth=80\charwidth, #1}
  \captionsetup{options=PYTHON}
}{}


% inline definition.
\newcommand*{\python}{\lstinline[{language=Python}]}

% input listing definition
\newcommand{\inputpython}[2][ ]{{%
  \captionsetup{options=PYTHON}
  \lstset{linewidth=80\charwidth}
  \lstinputlisting[language=Python,#1]{#2} 
}}
